<span data-ttu-id="15695-101">Ahora que tenemos una aplicación de función creada, aprenderemos a crear, configurar y ejecutar una función de Azure.</span><span class="sxs-lookup"><span data-stu-id="15695-101">Now that we have a function app created, we'll learn how to build, configure and execute an Azure function.</span></span>

### <a name="triggers"></a><span data-ttu-id="15695-102">Desencadenadores</span><span class="sxs-lookup"><span data-stu-id="15695-102">Triggers</span></span>
<span data-ttu-id="15695-103">Las funciones de Azure se controlan mediante eventos y se ejecutan en respuesta a un evento, como recibir una solicitud HTTP o agregar un mensaje a una cola.</span><span class="sxs-lookup"><span data-stu-id="15695-103">Azure functions are event driven and execute in response to an event, such as receiving an HTTP request or a message being added to a queue.</span></span> 

<span data-ttu-id="15695-104">El tipo de evento que inicia la función se denomina desencadenador.</span><span class="sxs-lookup"><span data-stu-id="15695-104">The type of event that initiates the function is called a trigger.</span></span> <span data-ttu-id="15695-105">Las funciones de Azure requieren al menos que se configure un desencadenador.</span><span class="sxs-lookup"><span data-stu-id="15695-105">Azure functions require at least one trigger to be configured.</span></span> <span data-ttu-id="15695-106">De lo contrario, no tendríamos forma de ejecutar la función.</span><span class="sxs-lookup"><span data-stu-id="15695-106">Otherwise we'd have no way of running the function.</span></span>

 <span data-ttu-id="15695-107">Azure admite una gran variedad de desencadenadores, incluidos:</span><span class="sxs-lookup"><span data-stu-id="15695-107">Azure supports a wide range of triggers, including:</span></span>
* <span data-ttu-id="15695-108">HTTPTrigger</span><span class="sxs-lookup"><span data-stu-id="15695-108">HTTPTrigger</span></span>
* <span data-ttu-id="15695-109">TimerTrigger</span><span class="sxs-lookup"><span data-stu-id="15695-109">TimerTrigger</span></span>
* <span data-ttu-id="15695-110">Webhook de GitHub</span><span class="sxs-lookup"><span data-stu-id="15695-110">GitHub webhook</span></span>
* <span data-ttu-id="15695-111">CosmosDBTrigger</span><span class="sxs-lookup"><span data-stu-id="15695-111">CosmosDBTrigger</span></span>
* <span data-ttu-id="15695-112">BlobTrigger</span><span class="sxs-lookup"><span data-stu-id="15695-112">BlobTrigger</span></span>
* <span data-ttu-id="15695-113">QueueTrigger</span><span class="sxs-lookup"><span data-stu-id="15695-113">QueueTrigger</span></span>
* <span data-ttu-id="15695-114">EventHubTrigger</span><span class="sxs-lookup"><span data-stu-id="15695-114">EventHubTrigger</span></span>
* <span data-ttu-id="15695-115">ServiceBusQueueTrigger</span><span class="sxs-lookup"><span data-stu-id="15695-115">ServiceBusQueueTrigger</span></span>
* <span data-ttu-id="15695-116">ServiceBusTopicTrigger</span><span class="sxs-lookup"><span data-stu-id="15695-116">ServiceBusTopicTrigger</span></span>

### <a name="bindings"></a><span data-ttu-id="15695-117">Enlaces</span><span class="sxs-lookup"><span data-stu-id="15695-117">Bindings</span></span>
<span data-ttu-id="15695-118">Los enlaces de función de Azure son una manera declarativa de conectarse a los datos de la función mediante programación.</span><span class="sxs-lookup"><span data-stu-id="15695-118">Azure function bindings are a declarative way to connect to data to your function programmatically.</span></span>

<span data-ttu-id="15695-119">Los enlaces son la conexión con los servicios de datos.</span><span class="sxs-lookup"><span data-stu-id="15695-119">Bindings are the connection to your data services.</span></span> <span data-ttu-id="15695-120">En una función de Azure con cero, uno o más enlaces permiten acceder a varios orígenes de datos.</span><span class="sxs-lookup"><span data-stu-id="15695-120">An Azure function with zero, one or more bindings allows you to access multiple data sources.</span></span> <span data-ttu-id="15695-121">También los define como enlaces de entrada o salida, o puede pensar en ellos como enlaces de lectura o escritura.</span><span class="sxs-lookup"><span data-stu-id="15695-121">You also define them as input or output bindings, or you can think of them as read or write bindings.</span></span>

<span data-ttu-id="15695-122">Suponga que tenía un desencadenador QueueTrigger que iniciaba una función cuando se agregaba un blob a una cola.</span><span class="sxs-lookup"><span data-stu-id="15695-122">Suppose you had a QueueTrigger that initiates a function when a blob is added to a queue.</span></span> <span data-ttu-id="15695-123">Se usaría un enlace de blob de entrada para conectarse a Azure Blob Storage.</span><span class="sxs-lookup"><span data-stu-id="15695-123">An input blob binding would be used to connect to Azure Blob storage.</span></span> 

<span data-ttu-id="15695-124">Los enlaces de salida se usan para almacenar datos.</span><span class="sxs-lookup"><span data-stu-id="15695-124">Output bindings are used to store data.</span></span> <span data-ttu-id="15695-125">Por ejemplo, envían el valor devuelto de la función al almacenamiento de tabla de Azure.</span><span class="sxs-lookup"><span data-stu-id="15695-125">For instance, they send the return value of the function to Azure Table storage.</span></span>

<span data-ttu-id="15695-126">Hay una lista completa de enlaces disponible en la [documentación de Azure](https://docs.microsoft.com/azure/azure-functions/functions-triggers-bindings#supported-bindings).</span><span class="sxs-lookup"><span data-stu-id="15695-126">A full list of available bindings is available in the [Azure documentation](https://docs.microsoft.com/azure/azure-functions/functions-triggers-bindings#supported-bindings).</span></span>

### <a name="a-sample-trigger-and-binding-functionjson"></a><span data-ttu-id="15695-127">Un desencadenador y enlace de ejemplo (function.json)</span><span class="sxs-lookup"><span data-stu-id="15695-127">A sample trigger and binding (function.json)</span></span>
<span data-ttu-id="15695-128">Esta es una definición de ejemplo de un desencadenador y un enlace para una función.</span><span class="sxs-lookup"><span data-stu-id="15695-128">This is a sample definition of a trigger and binding for a function.</span></span> <span data-ttu-id="15695-129">Puede observar que, según el tipo de enlace que se está describiendo, hay otros valores de propiedad diferentes que deben establecerse.</span><span class="sxs-lookup"><span data-stu-id="15695-129">You will note that depending on the type of binding you are describing, there are different property values that need to be set.</span></span> <span data-ttu-id="15695-130">Cada enlace también tiene una dirección que define si se trata de un enlace de entrada o salida.</span><span class="sxs-lookup"><span data-stu-id="15695-130">Each binding also has a direction that defines whether it is an input or output binding.</span></span> <span data-ttu-id="15695-131">Los desencadenadores son siempre enlaces de entrada.</span><span class="sxs-lookup"><span data-stu-id="15695-131">Triggers are always input bindings.</span></span> <span data-ttu-id="15695-132">Este ejemplo muestra una función que se desencadena mediante un mensaje que se agrega a una cola denominada **myqueue-items**.</span><span class="sxs-lookup"><span data-stu-id="15695-132">This sample shows a function that is triggered by a message being added to a queue named **myqueue-items**.</span></span> <span data-ttu-id="15695-133">Después, envía el valor devuelto de la función a la tabla **outTable** del almacenamiento de tabla de Azure.</span><span class="sxs-lookup"><span data-stu-id="15695-133">It then sends the return value of the function to the **outTable** table in Azure Table storage.</span></span>

```javascript
{
  "bindings": [
    {
      "name": "order",
      "type": "queueTrigger",
      "direction": "in",
      "queueName": "myqueue-items",
      "connection": "MY_STORAGE_ACCT_APP_SETTING"
    },
    {
      "name": "$return",
      "type": "table",
      "direction": "out",
      "tableName": "outTable",
      "connection": "MY_TABLE_STORAGE_ACCT_APP_SETTING"
    }
  ]
}
```
## <a name="premade-functions-and-templates"></a><span data-ttu-id="15695-134">Plantillas y funciones predefinidas</span><span class="sxs-lookup"><span data-stu-id="15695-134">Premade functions and templates</span></span>
<span data-ttu-id="15695-135">Azure proporciona plantillas preconfiguradas para escenarios comunes de funciones de Azure.</span><span class="sxs-lookup"><span data-stu-id="15695-135">Azure provides pre-configured templates for common Azure function scenarios.</span></span>

### <a name="quickstart-templates"></a><span data-ttu-id="15695-136">Plantillas de inicio rápido</span><span class="sxs-lookup"><span data-stu-id="15695-136">Quickstart templates</span></span>
<span data-ttu-id="15695-137">Para agregar una función de Azure, debe seleccionar una aplicación de función.</span><span class="sxs-lookup"><span data-stu-id="15695-137">To add an Azure function, you must select a function app.</span></span> <span data-ttu-id="15695-138">La aplicación de función puede identificarse por el rayo en el icono de los corchetes angulares.</span><span class="sxs-lookup"><span data-stu-id="15695-138">The function app can be identified by the lightning bolt within pointy brackets icon.</span></span>  
![Icono de función](../images/5-function-icon.png)

<span data-ttu-id="15695-140">Al agregar la primera función de Azure, se le presentará la pantalla Inicio rápido.</span><span class="sxs-lookup"><span data-stu-id="15695-140">When adding your first Azure function, you are presented with the Quickstart screen.</span></span> <span data-ttu-id="15695-141">Esta pantalla le permite realizar una selección del tipo de desencadenador deseado y el lenguaje de programación.</span><span class="sxs-lookup"><span data-stu-id="15695-141">This screen allows you to make a selection on your desired trigger type and programming language.</span></span> <span data-ttu-id="15695-142">A continuación, según las selecciones realizadas, Azure generará el código de función y la configuración de forma automática.</span><span class="sxs-lookup"><span data-stu-id="15695-142">Then, based on your selections, Azure will generate the function code and configuration for you.</span></span>  
![Inicio rápido de la función](../images/5-quickstart-form.png)

### <a name="function-templates"></a><span data-ttu-id="15695-144">Plantillas de función</span><span class="sxs-lookup"><span data-stu-id="15695-144">Function templates</span></span>
<span data-ttu-id="15695-145">La selección de plantillas no se limita a las que están disponibles en el inicio rápido.</span><span class="sxs-lookup"><span data-stu-id="15695-145">The selection of templates is not limited to those available in the Quickstart.</span></span> <span data-ttu-id="15695-146">También tiene la posibilidad de elegir entre más de 30 plantillas diferentes.</span><span class="sxs-lookup"><span data-stu-id="15695-146">You also have the option of choosing from over 30 different templates.</span></span> <span data-ttu-id="15695-147">Puede acceder a la pantalla de lista de la plantillas al crear las funciones posteriores, o bien seleccionando la opción **Función personalizada** en la pantalla Inicio rápido.</span><span class="sxs-lookup"><span data-stu-id="15695-147">You can access the template list screen while creating subsequent functions, or by selecting the **Custom function** option on the Quickstart screen.</span></span>  
<span data-ttu-id="15695-148">![Plantillas de función](../images/5-template-list.png)</span><span class="sxs-lookup"><span data-stu-id="15695-148">![Function templates](../images/5-template-list.png)</span></span>

## <a name="navigating-to-your-function-and-files"></a><span data-ttu-id="15695-149">Navegación a la función y archivos</span><span class="sxs-lookup"><span data-stu-id="15695-149">Navigating to your function and files</span></span>
<span data-ttu-id="15695-150">Después de crear una función a partir de una plantilla, se crean varios archivos.</span><span class="sxs-lookup"><span data-stu-id="15695-150">After you create a function from a template, several files are created.</span></span> <span data-ttu-id="15695-151">Supongamos que optó por utilizar el inicio rápido Webhook + API mediante JavaScript.</span><span class="sxs-lookup"><span data-stu-id="15695-151">Suppose you opted to use the Webhook + API Quickstart using JavaScript.</span></span> <span data-ttu-id="15695-152">Los archivos generados serían un archivo de configuración, **function.json**, y un archivo de código fuente, **index.js**.</span><span class="sxs-lookup"><span data-stu-id="15695-152">The files generated would be a configuration file, **function.json**, and a source code file, **index.js**.</span></span> <span data-ttu-id="15695-153">Al acceder a la aplicación de función, se presentará un árbol de menús en el que se mostrarán las funciones que se han creado en la aplicación.</span><span class="sxs-lookup"><span data-stu-id="15695-153">When accessing the function app, you will be presented with a menu tree displaying the functions that have been created in the app.</span></span> <span data-ttu-id="15695-154">Es también en este elemento de menú **Funciones** donde se pueden agregar funciones adicionales a la aplicación de función (aparecerá un icono de signo más + cuando mantenga el puntero sobre el elemento de menú).</span><span class="sxs-lookup"><span data-stu-id="15695-154">It is also on this **Functions** menu item that you are able to add additional functions to the function app (a plus + icon will appear when you're hovering over the menu item).</span></span>  
<span data-ttu-id="15695-155">![Botón Agregar función](../images/5-function-add-button.png)</span><span class="sxs-lookup"><span data-stu-id="15695-155">![Add Function button](../images/5-function-add-button.png)</span></span> 

<span data-ttu-id="15695-156">En el caso de este inicio rápido mencionado anteriormente, al expandir **Funciones** en la vista de árbol, verá una función con un nombre predeterminado de **HttpTriggerJS1** (también se indica mediante el icono f de función).</span><span class="sxs-lookup"><span data-stu-id="15695-156">In the case of this Quickstart mentioned above, when you expand **Functions** in the tree view, you will see one function with a default name of **HttpTriggerJS1** (also indicated by the function f icon).</span></span> <span data-ttu-id="15695-157">Al seleccionar esta función se abrirá una ventana de código y mostrará el archivo de código fuente **index.js**.</span><span class="sxs-lookup"><span data-stu-id="15695-157">Selecting this function will open up a code window and display the **index.js** source file.</span></span> <span data-ttu-id="15695-158">En el lado derecho de la ventana de código, hay un menú flotante que incluye una pestaña **Ver archivos**.</span><span class="sxs-lookup"><span data-stu-id="15695-158">On the right-hand side of the code window, there is a flyout menu that includes a tab to **View files**.</span></span> <span data-ttu-id="15695-159">Al seleccionar esta pestaña se mostrará la estructura de archivos (imitada en el almacenamiento) que conforma la función.</span><span class="sxs-lookup"><span data-stu-id="15695-159">Selecting this tab will show you the file structure (mimicked in storage) that makes up your function.</span></span>  
<span data-ttu-id="15695-160">![Plantillas de función](../images/5-file-navigation.png)</span><span class="sxs-lookup"><span data-stu-id="15695-160">![Function templates](../images/5-file-navigation.png)</span></span>

## <a name="execution-options-for-testing-your-azure-function"></a><span data-ttu-id="15695-161">Opciones de ejecución para probar la función de Azure</span><span class="sxs-lookup"><span data-stu-id="15695-161">Execution options for testing your Azure function</span></span>
<span data-ttu-id="15695-162">Una vez creada una función de Azure, necesitará saber cómo probarla.</span><span class="sxs-lookup"><span data-stu-id="15695-162">Once you have an Azure function created, you will need to know how to test it.</span></span> <span data-ttu-id="15695-163">Dispone de dos enfoques: ejecución manual y pruebas desde dentro de Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="15695-163">There are a couple of approaches: manual execution and testing from within the Azure portal itself.</span></span>

### <a name="manual-execution-of-a-function"></a><span data-ttu-id="15695-164">Ejecución manual de una función</span><span class="sxs-lookup"><span data-stu-id="15695-164">Manual execution of a function</span></span>
<span data-ttu-id="15695-165">Puede iniciar la ejecución de una función manualmente desencadenando el desencadenador configurado.</span><span class="sxs-lookup"><span data-stu-id="15695-165">You can initiate the execution of a function by manually triggering the configured trigger.</span></span> <span data-ttu-id="15695-166">Por ejemplo, si está utilizando un desencadenador HttpTrigger, puede usar una herramienta como Postman o cURL para iniciar una solicitud HTTP a la dirección URL del punto de conexión de función.</span><span class="sxs-lookup"><span data-stu-id="15695-166">For instance, if you are using an HttpTrigger - you can use a tool such as Postman or cURL to initiate an HTTP request to your function endpoint URL.</span></span>  
<span data-ttu-id="15695-167">![Ejecución Postman de una función](../images/5-postman-execution.png) Puede obtener la dirección URL del punto de conexión seleccionando el desencadenador HTTP en el panel de navegación izquierdo y luego seleccionando el botón **Obtener la dirección URL de la función**.</span><span class="sxs-lookup"><span data-stu-id="15695-167">![Postman execution of a function](../images/5-postman-execution.png) You can obtain the endpoint URL by selecting your HTTP Trigger from the left navigation, and then selecting the **Get function URL** button.</span></span>  
<span data-ttu-id="15695-168">![Obtener la dirección URL de la función](../images/5-get-function-url.png)</span><span class="sxs-lookup"><span data-stu-id="15695-168">![Get function URL](../images/5-get-function-url.png)</span></span>

### <a name="testing-a-function-in-the-azure-portal"></a><span data-ttu-id="15695-169">Prueba de una función en Azure Portal</span><span class="sxs-lookup"><span data-stu-id="15695-169">Testing a function in the Azure portal</span></span>
<span data-ttu-id="15695-170">Como alternativa, Azure Portal también proporciona una manera cómoda de probar las funciones.</span><span class="sxs-lookup"><span data-stu-id="15695-170">Alternatively, the Azure portal also provides a convenient way to test your functions.</span></span> <span data-ttu-id="15695-171">En el lado derecho de la ventana de código, hay un menú de navegación con pestañas flotante.</span><span class="sxs-lookup"><span data-stu-id="15695-171">On the right side of the code window, there is a flyout tabbed navigation menu.</span></span> <span data-ttu-id="15695-172">Este menú contiene un elemento **Prueba**.</span><span class="sxs-lookup"><span data-stu-id="15695-172">This menu contains a **Test** item.</span></span> <span data-ttu-id="15695-173">Al expandir el menú y seleccionar esta pestaña dispondrá de otra manera de ejecutar la función y ver el resultado.</span><span class="sxs-lookup"><span data-stu-id="15695-173">Expanding the menu and selecting this tab gives you another way to execute your function and view the result.</span></span> <span data-ttu-id="15695-174">De acuerdo con el escenario del desencadenador HttpTrigger, puede establecer el método HTTP y agregar parámetros de cadena de consulta y encabezados HTTP a la solicitud.</span><span class="sxs-lookup"><span data-stu-id="15695-174">In keeping with the HttpTrigger scenario, you can set the HTTP method, and add querystring parameters and HTTP headers to the request.</span></span> <span data-ttu-id="15695-175">También puede cambiar el cuerpo de la solicitud para probar escenarios adicionales.</span><span class="sxs-lookup"><span data-stu-id="15695-175">You may also change the request body to test additional scenarios.</span></span> <span data-ttu-id="15695-176">En la ventana de salida muestra el resultado de la función.</span><span class="sxs-lookup"><span data-stu-id="15695-176">The output window shows the result of the function.</span></span>  
<span data-ttu-id="15695-177">![Ejecución de una función mediante el portal](../images/5-portal-execution.png)</span><span class="sxs-lookup"><span data-stu-id="15695-177">![Portal execution of a function](../images/5-portal-execution.png)</span></span>

## <a name="monitoring-an-azure-function"></a><span data-ttu-id="15695-178">Supervisión de una función de Azure</span><span class="sxs-lookup"><span data-stu-id="15695-178">Monitoring an Azure function</span></span>
<span data-ttu-id="15695-179">Durante el desarrollo de la función de Azure, poder registrar los mensajes y determinar los escenarios de excepciones es esencial para garantizar que las funciones se están preparando para la producción.</span><span class="sxs-lookup"><span data-stu-id="15695-179">During Azure function development, being able to log messages and determine exception scenarios is critical to ensuring that you are getting your functions production-ready.</span></span> <span data-ttu-id="15695-180">Esto es importante en un escenario de producción, al realizar el seguimiento del origen de un defecto.</span><span class="sxs-lookup"><span data-stu-id="15695-180">This is just as important in a production scenario, when you are tracking down the source of a defect.</span></span> <span data-ttu-id="15695-181">Azure Portal nos proporciona una interfaz de usuario que ofrece un panel de supervisión, así como una manera de revisar los registros de ejecución y las excepciones que se obtienen de las funciones de Azure.</span><span class="sxs-lookup"><span data-stu-id="15695-181">The Azure portal gives us a user interface that provides a monitoring dashboard as well as a way to review execution logs and exceptions obtained from your Azure functions.</span></span>

### <a name="monitoring-dashboard"></a><span data-ttu-id="15695-182">Panel de supervisión</span><span class="sxs-lookup"><span data-stu-id="15695-182">Monitoring dashboard</span></span>
<span data-ttu-id="15695-183">En el menú de navegación de la aplicación de función, una vez que expanda el nodo de función, verá un elemento de menú **Monitor**.</span><span class="sxs-lookup"><span data-stu-id="15695-183">In the function app navigation menu, once you expand the function node - you will see a **Monitor** menu item.</span></span> <span data-ttu-id="15695-184">El panel del monitor proporciona una forma rápida de ver el historial de ejecuciones de función.</span><span class="sxs-lookup"><span data-stu-id="15695-184">The monitor dashboard provides a quick way to view the history of function executions.</span></span> <span data-ttu-id="15695-185">Esta vista muestra la marca de tiempo, el código de resultado, la duración y el identificador de operación, así como si se ha completado correctamente.</span><span class="sxs-lookup"><span data-stu-id="15695-185">This view displays the timestamp, result code, duration, and operation ID, as well as if it completed successfully.</span></span> <span data-ttu-id="15695-186">Los datos se rellenan mediante Azure Application Insights.</span><span class="sxs-lookup"><span data-stu-id="15695-186">The data is populated via Azure Application Insights.</span></span>  
<span data-ttu-id="15695-187">![Monitor de función](../images/5-monitor-function.png)</span><span class="sxs-lookup"><span data-stu-id="15695-187">![Function monitor](../images/5-monitor-function.png)</span></span>

### <a name="log-window"></a><span data-ttu-id="15695-188">Ventana de registro</span><span class="sxs-lookup"><span data-stu-id="15695-188">Log window</span></span>
<span data-ttu-id="15695-189">También puede agregar instrucciones de registro a la función.</span><span class="sxs-lookup"><span data-stu-id="15695-189">You are also able to add log statements to your function.</span></span> <span data-ttu-id="15695-190">Estas instrucciones aparecerán en la ventana de registro de la función.</span><span class="sxs-lookup"><span data-stu-id="15695-190">These statements will appear in the log window of the function.</span></span> <span data-ttu-id="15695-191">La ventana de registro se encuentra en un menú flotante con pestañas en la parte inferior de la ventana de código.</span><span class="sxs-lookup"><span data-stu-id="15695-191">The log window is located in a tabbed flyout menu located at the bottom of the code window.</span></span> <span data-ttu-id="15695-192">Cuando se use una función basada en JavaScript, agregaría una instrucción de registro mediante la sintaxis siguiente:</span><span class="sxs-lookup"><span data-stu-id="15695-192">When using a JavaScript-based function, you would add a log statement using the following syntax:</span></span>
```javascript
  context.log('Enter your logging statement here');
```  
![Ventana de registro](../images/5-log-window.png)

### <a name="errors-and-warnings-window"></a><span data-ttu-id="15695-194">Ventana de errores y advertencias</span><span class="sxs-lookup"><span data-stu-id="15695-194">Errors and warnings window</span></span>
<span data-ttu-id="15695-195">Puede encontrar la pestaña de la ventana de errores y advertencias en el mismo menú flotante que la ventana de registro.</span><span class="sxs-lookup"><span data-stu-id="15695-195">You can locate the errors and warnings window tab in the same flyout menu as the log window.</span></span> <span data-ttu-id="15695-196">Esta ventana mostrará los errores y las advertencias de compilación dentro del código.</span><span class="sxs-lookup"><span data-stu-id="15695-196">This window will show compilation errors and warnings within your code.</span></span> <span data-ttu-id="15695-197">Dado que JavaScript es un lenguaje interpretado y dinámico, la siguiente imagen muestra un error de compilación en una función de C#.</span><span class="sxs-lookup"><span data-stu-id="15695-197">As JavaScript is a dynamic and interpreted language, the following image shows a compilation error in a C# function.</span></span>  
![Ventana de errores y advertencias](../images/5-errors-window.png)
