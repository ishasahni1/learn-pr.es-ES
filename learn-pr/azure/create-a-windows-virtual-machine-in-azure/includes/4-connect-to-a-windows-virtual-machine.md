<span data-ttu-id="3e449-101">Como administrador de red en una empresa de análisis de datos, es responsabilidad suya conectarse a máquinas virtuales en Azure y comprobar que están configuradas correctamente.</span><span class="sxs-lookup"><span data-stu-id="3e449-101">As a network administrator at a data analysis company, you're responsible for connecting to virtual machines in Azure and checking that they're properly configured.</span></span> <span data-ttu-id="3e449-102">Puede usarlo con un cliente del Protocolo de escritorio remoto para conectarse a la interfaz de usuario de escritorio de Windows de la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="3e449-102">You do that using a Remote Desktop Protocol client to connect to the VM's Windows desktop UI.</span></span>

## <a name="what-is-the-remote-desktop-protocol"></a><span data-ttu-id="3e449-103">¿Qué es el Protocolo de escritorio remoto?</span><span class="sxs-lookup"><span data-stu-id="3e449-103">What is the Remote Desktop Protocol?</span></span>

<span data-ttu-id="3e449-104">El Protocolo de escritorio remoto (RDP) proporciona conectividad remota a la interfaz de usuario de equipos con Windows.</span><span class="sxs-lookup"><span data-stu-id="3e449-104">Remote Desktop Protocol (RDP) provides remote connectivity to the UI of Windows-based computers.</span></span> <span data-ttu-id="3e449-105">RDP permite iniciar sesión en un equipo remoto Windows físico o virtual y controlar dicho equipo como si estuviese sentado en la consola.</span><span class="sxs-lookup"><span data-stu-id="3e449-105">RDP enables you to sign in to a remote physical or virtual Windows computer and control that computer as if you were seated at the console.</span></span>

> [!Note]
> <span data-ttu-id="3e449-106">Windows Hyper-V en Windows Server 2016 y Windows 10 utiliza RDP para conectarse a máquinas virtuales que se ejecutan en el hipervisor.</span><span class="sxs-lookup"><span data-stu-id="3e449-106">Windows Hyper-V in Windows Server 2016 and Windows 10 uses RDP to connect to virtual machines running on the hypervisor.</span></span>

<span data-ttu-id="3e449-107">Una conexión RDP permite llevar a cabo la gran mayoría de las operaciones que puede realizar desde la consola de un equipo físico, con la excepción de algunas funciones relacionadas con la potencia y el hardware.</span><span class="sxs-lookup"><span data-stu-id="3e449-107">An RDP connection enables you to carry out the vast majority of operations that you can do from the console of a physical computer, with the exception of some power and hardware-related functions.</span></span>

<span data-ttu-id="3e449-108">Una conexión RDP requiere un cliente de RDP.</span><span class="sxs-lookup"><span data-stu-id="3e449-108">An RDP connection requires an RDP client.</span></span> <span data-ttu-id="3e449-109">Microsoft proporciona clientes de RDP para los siguientes sistemas operativos:</span><span class="sxs-lookup"><span data-stu-id="3e449-109">Microsoft provides RDP clients for the following operating systems:</span></span>

* <span data-ttu-id="3e449-110">Windows</span><span class="sxs-lookup"><span data-stu-id="3e449-110">Windows</span></span>
* <span data-ttu-id="3e449-111">iOS</span><span class="sxs-lookup"><span data-stu-id="3e449-111">iOS</span></span>
* <span data-ttu-id="3e449-112">MacOS</span><span class="sxs-lookup"><span data-stu-id="3e449-112">MacOS</span></span>
* <span data-ttu-id="3e449-113">Android</span><span class="sxs-lookup"><span data-stu-id="3e449-113">Android</span></span>

<span data-ttu-id="3e449-114">También hay clientes de Linux de código abierto, como Remmina, que le permiten conectarse a un equipo Windows desde una distribución de Ubuntu.</span><span class="sxs-lookup"><span data-stu-id="3e449-114">There are also open-source Linux clients, such as Remmina that enable you to connect to a Windows PC from an Ubuntu distribution.</span></span>

<span data-ttu-id="3e449-115">Windows 10 incluye un cliente de RDP.</span><span class="sxs-lookup"><span data-stu-id="3e449-115">Windows 10 includes an RDP client.</span></span>

![Cliente de RDP de Windows](../images/2-rdp-client.PNG)

## <a name="what-functionality-does-an-rdp-connection-support"></a><span data-ttu-id="3e449-117">¿Qué funcionalidad admite una conexión RDP?</span><span class="sxs-lookup"><span data-stu-id="3e449-117">What functionality does an RDP connection support?</span></span>

<span data-ttu-id="3e449-118">Con una conexión RDP, puede interactuar con la interfaz de usuario.</span><span class="sxs-lookup"><span data-stu-id="3e449-118">With an RDP connection, you can interact with the UI.</span></span> <span data-ttu-id="3e449-119">Sin embargo, también puede conectarse a otros servicios en el equipo remoto.</span><span class="sxs-lookup"><span data-stu-id="3e449-119">However, you can also connect to other services on the remote computer.</span></span> <span data-ttu-id="3e449-120">Estos servicios incluyen:</span><span class="sxs-lookup"><span data-stu-id="3e449-120">These services include:</span></span>

* <span data-ttu-id="3e449-121">Conexiones de impresora que permiten al equipo remoto imprimir en el dispositivo de impresión local.</span><span class="sxs-lookup"><span data-stu-id="3e449-121">Printer connections that enable the remote computer to print to your local print device.</span></span>
* <span data-ttu-id="3e449-122">Reproducción de audio, donde se puede reproducir audio en el equipo local o en el dispositivo remoto.</span><span class="sxs-lookup"><span data-stu-id="3e449-122">Audio playback, where audio can play either on the local computer or on the remote device.</span></span>
* <span data-ttu-id="3e449-123">Grabación de audio, donde puede grabar audio desde el equipo local y dirigir ese sonido al dispositivo remoto.</span><span class="sxs-lookup"><span data-stu-id="3e449-123">Audio recording, where you can record audio from the local computer and direct that sound to the remote device.</span></span>
* <span data-ttu-id="3e449-124">Puertos, que puede redirigir a los puertos en el equipo local.</span><span class="sxs-lookup"><span data-stu-id="3e449-124">Ports, which you can redirect to the ports on the local computer.</span></span>
* <span data-ttu-id="3e449-125">Unidades, incluidas las unidades de red asignadas, donde las unidades aparecerán como conectadas al equipo remoto.</span><span class="sxs-lookup"><span data-stu-id="3e449-125">Drives, including mapped network drives, where the drives will appear as connected to the remote computer.</span></span>
* <span data-ttu-id="3e449-126">Dispositivos de captura de vídeo, como las cámaras web integradas.</span><span class="sxs-lookup"><span data-stu-id="3e449-126">Video capture devices, such as integrated web cams.</span></span>
* <span data-ttu-id="3e449-127">Otros dispositivos Plug and Play compatibles.</span><span class="sxs-lookup"><span data-stu-id="3e449-127">Other supported plug and play devices.</span></span>

<span data-ttu-id="3e449-128">No todas estas características son compatibles en Azure, ya que existen restricciones en los recursos físicos que están disponibles en dicha plataforma.</span><span class="sxs-lookup"><span data-stu-id="3e449-128">Not all of these features are supported in Azure, as there are restrictions on what physical assets are available on that platform.</span></span> <span data-ttu-id="3e449-129">Por ejemplo, solo las impresoras de software pueden redirigirse a través de una conexión RDP desde una máquina virtual hospedada en Azure hasta los dispositivos de impresión del cliente de conexión.</span><span class="sxs-lookup"><span data-stu-id="3e449-129">For example, only software printers can be redirected across an RDP connection from an Azure-hosted VM to the connecting client's print devices.</span></span>

## <a name="configure-network-settings-for-rdp-access-to-virtual-machines"></a><span data-ttu-id="3e449-130">Configuración de red para el acceso de RDP a las máquinas virtuales</span><span class="sxs-lookup"><span data-stu-id="3e449-130">Configure network settings for RDP access to virtual machines</span></span>

<span data-ttu-id="3e449-131">Las conexiones a las máquinas virtuales de Azure pueden realizarse de tres formas:</span><span class="sxs-lookup"><span data-stu-id="3e449-131">Connections to Azure VMs can be made in three ways:</span></span>

1. <span data-ttu-id="3e449-132">Directamente a la dirección IP pública de la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="3e449-132">Directly to the public IP address of the VM.</span></span>
2. <span data-ttu-id="3e449-133">A través de una conexión de red privada virtual (VPN).</span><span class="sxs-lookup"><span data-stu-id="3e449-133">Through a virtual private network (VPN) connection.</span></span>
3. <span data-ttu-id="3e449-134">A través de una conexión de ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="3e449-134">Through an ExpressRoute connection.</span></span>

<span data-ttu-id="3e449-135">Una dirección IP pública puede ser dinámica o asignarse de forma permanentemente.</span><span class="sxs-lookup"><span data-stu-id="3e449-135">A public IP address can be either permanently allocated or dynamic.</span></span> <span data-ttu-id="3e449-136">También necesitará asegurarse de que tiene acceso a la dirección pública de la máquina virtual en el puerto 3389 (RDP).</span><span class="sxs-lookup"><span data-stu-id="3e449-136">You also need to ensure that you have access to the VM's public address on port 3389 (RDP).</span></span> <span data-ttu-id="3e449-137">Esta disposición puede requerir la negociación con el equipo que administra la seguridad del firewall de su organización, con la configuración de una regla para la dirección IP pública de la máquina virtual en el puerto 3389.</span><span class="sxs-lookup"><span data-stu-id="3e449-137">This provision may require negotiation with the team that's managing your organization's firewall security, setting up a rule to your VM's public IP address on port 3389.</span></span>

<span data-ttu-id="3e449-138">Las direcciones IP públicas dinámicas se reasignan cada vez que se reinicia la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="3e449-138">Dynamic public IP addresses are reallocated every time the VM restarts.</span></span> <span data-ttu-id="3e449-139">Las direcciones estáticas son persistentes, pero cuestan más.</span><span class="sxs-lookup"><span data-stu-id="3e449-139">Static addresses are persistent, but cost more.</span></span>

<span data-ttu-id="3e449-140">Para conectarse a través de una VPN, la red local debe tener una conexión VPN activa a Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="3e449-140">To connect through a VPN, your local network must have an active VPN connection to Microsoft Azure.</span></span>

<span data-ttu-id="3e449-141">El enfoque del vínculo de ExpressRoute administra la conectividad a la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="3e449-141">The ExpressRoute link approach manages connectivity to the VM.</span></span> <span data-ttu-id="3e449-142">Este enfoque también ofrece la conexión con la latencia más baja y el ancho de banda más alto.</span><span class="sxs-lookup"><span data-stu-id="3e449-142">This approach also provides the lowest latency and highest bandwidth connection.</span></span>

> [!Note]
> <span data-ttu-id="3e449-143">Con independencia de la opción que use para conectarse a Azure, necesita asegurarse de que se pueda acceder a la máquina virtual a través de RDP, normalmente en el puerto predeterminado 3389.</span><span class="sxs-lookup"><span data-stu-id="3e449-143">Regardless of which option you use to connect to Azure, you need to ensure the virtual machine is accessible over RDP, typically on the default port 3389.</span></span> <span data-ttu-id="3e449-144">Puede configurar la máquina virtual para que se pueda acceder a ella solo desde su propia dirección IP de cliente.</span><span class="sxs-lookup"><span data-stu-id="3e449-144">You can configure the VM so it can be accessed only from your own client IP address.</span></span> <span data-ttu-id="3e449-145">La conexión a una máquina virtual a través del puerto 3389 en una dirección IP pública solo se recomienda para entornos de prueba.</span><span class="sxs-lookup"><span data-stu-id="3e449-145">Connecting to a VM over port 3389 on a public IP address is only recommended for test environments.</span></span> <span data-ttu-id="3e449-146">En entornos de producción, use la opción 2 o 3.</span><span class="sxs-lookup"><span data-stu-id="3e449-146">In production environments, use option 2 or 3.</span></span>

## <a name="how-do-you-connect-to-a-vm-in-azure-using-rdp"></a><span data-ttu-id="3e449-147">¿Cómo me conecto a una máquina virtual en Azure con RDP?</span><span class="sxs-lookup"><span data-stu-id="3e449-147">How do you connect to a VM in Azure using RDP?</span></span>

<span data-ttu-id="3e449-148">Conectarse a una máquina virtual en Azure mediante RDP es un proceso sencillo.</span><span class="sxs-lookup"><span data-stu-id="3e449-148">Connecting to a VM in Azure using RDP is a simple process.</span></span> <span data-ttu-id="3e449-149">En Azure Portal, vaya a las propiedades de la máquina virtual y, en la parte superior, haga clic en **Conectar**.</span><span class="sxs-lookup"><span data-stu-id="3e449-149">In the Azure portal, you go to the properties of your VM, and at the top, click **Connect**.</span></span> <span data-ttu-id="3e449-150">Esta acción descarga un archivo .RDP preconfigurado que Windows luego abre en el cliente de RDP.</span><span class="sxs-lookup"><span data-stu-id="3e449-150">This action downloads a preconfigured .RDP file that Windows then opens in the RDP client.</span></span> <span data-ttu-id="3e449-151">Puede elegir conectarse a través de la dirección IP pública de la máquina virtual en el archivo RDP.</span><span class="sxs-lookup"><span data-stu-id="3e449-151">You can choose to connect over the public IP address of the VM in the RDP file.</span></span> <span data-ttu-id="3e449-152">Como alternativa, si se conecta a través de VPN o ExpressRoute, puede seleccionar la dirección IP interna.</span><span class="sxs-lookup"><span data-stu-id="3e449-152">Alternatively, if you're connecting over VPN or ExpressRoute, you can select the internal IP address.</span></span> <span data-ttu-id="3e449-153">También puede seleccionar el número de puerto para la conexión.</span><span class="sxs-lookup"><span data-stu-id="3e449-153">You can also select the port number for the connection.</span></span>

<span data-ttu-id="3e449-154">Si usa una dirección IP pública estática para la máquina virtual, puede guardar el archivo .RDP en su escritorio.</span><span class="sxs-lookup"><span data-stu-id="3e449-154">If you're using a static public IP address for the VM, you can save the .RDP file to your desktop.</span></span> <span data-ttu-id="3e449-155">Si usa una dirección IP dinámica, el archivo .RDP solo es válido mientras la máquina virtual esté en ejecución.</span><span class="sxs-lookup"><span data-stu-id="3e449-155">If you're using dynamic IP addressing, the .RDP file only remains valid while the VM is running.</span></span> <span data-ttu-id="3e449-156">Si detiene y reinicia la máquina virtual, debe descargar otro archivo .RDP.</span><span class="sxs-lookup"><span data-stu-id="3e449-156">If you stop and restart the VM, you must download another .RDP file.</span></span>

> [!Note]
> <span data-ttu-id="3e449-157">También puede especificar la dirección IP pública de la máquina virtual en el cliente de RDP de Windows y hacer clic en **Conectar**.</span><span class="sxs-lookup"><span data-stu-id="3e449-157">You can also enter the public IP address of the VM into the Windows RDP client and click **Connect**.</span></span>

<span data-ttu-id="3e449-158">Cuando se conecte, normalmente recibirá dos advertencias.</span><span class="sxs-lookup"><span data-stu-id="3e449-158">When you connect, you will typically receive two warnings.</span></span> <span data-ttu-id="3e449-159">Dichos componentes son:</span><span class="sxs-lookup"><span data-stu-id="3e449-159">These are:</span></span>

* <span data-ttu-id="3e449-160">Advertencia del editor: porque el archivo .RDP no está firmado públicamente.</span><span class="sxs-lookup"><span data-stu-id="3e449-160">Publisher warning - caused by the .RDP file not being publicly signed.</span></span>
* <span data-ttu-id="3e449-161">Advertencia de certificado: porque el certificado de máquina no es de confianza.</span><span class="sxs-lookup"><span data-stu-id="3e449-161">Certificate warning - caused by the machine certificate not being trusted.</span></span>

<span data-ttu-id="3e449-162">En los entornos de prueba, estas advertencias pueden ignorarse.</span><span class="sxs-lookup"><span data-stu-id="3e449-162">In test environments, these warnings can be ignored.</span></span> <span data-ttu-id="3e449-163">En entornos de producción, el archivo .RDP podría firmarse con RDPSIGN.EXE y el certificado de máquina puede ubicarse en el almacén de **entidades de certificación raíz de confianza** del cliente.</span><span class="sxs-lookup"><span data-stu-id="3e449-163">In production environments, the .RDP file could be signed using RDPSIGN.EXE and the machine certificate placed in the client's **Trusted Root Certification Authorities** store.</span></span>

## <a name="summary"></a><span data-ttu-id="3e449-164">Resumen</span><span class="sxs-lookup"><span data-stu-id="3e449-164">Summary</span></span>

<span data-ttu-id="3e449-165">Ahora puede conectarse a una máquina virtual Windows con RDP.</span><span class="sxs-lookup"><span data-stu-id="3e449-165">Now you can connect to a Windows VM by using RDP.</span></span> <span data-ttu-id="3e449-166">En el ejercicio siguiente, se utiliza RDP para conectarse a una máquina virtual y luego instalar un rol de servidor en ese equipo.</span><span class="sxs-lookup"><span data-stu-id="3e449-166">In the following exercise, you will use RDP to connect to a VM, then install a server role on that computer.</span></span>
