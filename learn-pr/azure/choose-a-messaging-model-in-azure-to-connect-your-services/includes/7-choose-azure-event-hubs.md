<span data-ttu-id="ffdee-101">Hay determinadas aplicaciones que generan un gran número de eventos de casi tantos orígenes.</span><span class="sxs-lookup"><span data-stu-id="ffdee-101">There are certain applications that produce a massive number of events from almost as many sources.</span></span> <span data-ttu-id="ffdee-102">A menudo escuchamos el término "macrodatos" aplicado a estas situaciones y requieren una infraestructura única para controlarlas.</span><span class="sxs-lookup"><span data-stu-id="ffdee-102">We often hear the term "Big Data" applied to these situations and they require unique infrastructure to handle them.</span></span>

<span data-ttu-id="ffdee-103">Imagine que trabaja para Contoso Aircraft Engines.</span><span class="sxs-lookup"><span data-stu-id="ffdee-103">Imagine you work for Contoso Aircraft Engines.</span></span> <span data-ttu-id="ffdee-104">Los motores que el empleador fabrica tiene cientos de sensores.</span><span class="sxs-lookup"><span data-stu-id="ffdee-104">The engines your employer manufactures have hundreds of sensors.</span></span> <span data-ttu-id="ffdee-105">Antes de que se pueda volar un avión cada mañana, sus motores están conectados a un arnés de prueba y se ponen a prueba.</span><span class="sxs-lookup"><span data-stu-id="ffdee-105">Before an aircraft can be flown each morning, its engines are connected to a test harness and put through their paces.</span></span> <span data-ttu-id="ffdee-106">Además, los datos de vuelo almacenados en caché se transmiten cuando el avión se conecta al equipo de tierra.</span><span class="sxs-lookup"><span data-stu-id="ffdee-106">Additionally, cached in-flight data is streamed when the aircraft is connected to ground equipment.</span></span>

<span data-ttu-id="ffdee-107">Desea usar datos de sensor históricos para buscar patrones en las lecturas de sensor que indiquen que es probable que se produzca un error del motor pronto.</span><span class="sxs-lookup"><span data-stu-id="ffdee-107">You want to use historic sensor data to find patterns in the sensor readings that indicate engine failure is likely to happen soon.</span></span> <span data-ttu-id="ffdee-108">Desea que las lecturas de sensor en tiempo real se comparen con estos patrones de error.</span><span class="sxs-lookup"><span data-stu-id="ffdee-108">You want the real-time sensor readings to be compared against these failure patterns.</span></span> <span data-ttu-id="ffdee-109">Después, puede advertir a los usuarios prácticamente en tiempo real si un motor muestra lecturas preocupantes.</span><span class="sxs-lookup"><span data-stu-id="ffdee-109">You can then warn users in near real time if an engine is showing worrisome readings.</span></span>

## <a name="what-is-azure-event-hubs"></a><span data-ttu-id="ffdee-110">¿Qué es Azure Event Hubs?</span><span class="sxs-lookup"><span data-stu-id="ffdee-110">What is Azure Event Hubs</span></span>

<span data-ttu-id="ffdee-111">Azure Event Hubs es un intermediario de patrón de comunicación de publicación y suscripción, pero a diferencia de Event Grid está optimizado para un rendimiento extremadamente alto, un gran número de publicadores, seguridad y resistencia.</span><span class="sxs-lookup"><span data-stu-id="ffdee-111">Azure Event Hub is an intermediary for the publish-subscribe communication pattern, but unlike Event Grid it is optimized for extremely high throughput, a large number of publishers, security, and resiliency.</span></span>

<span data-ttu-id="ffdee-112">Mientras que Event Grid se ajusta más o menos perfectamente al patrón de publicación y suscripción, ya que simplemente administra las suscripciones y enruta las comunicaciones a los suscriptores, Event Hubs realiza bastantes servicios adicionales que de alguna manera lo hacen parecerse a un bus de servicio o a una cola de mensajes más que un simple presentador de eventos.</span><span class="sxs-lookup"><span data-stu-id="ffdee-112">Whereas Event Grid fits more or less perfectly into the publish-subscribe pattern in that it simply manages subscriptions and routes communications to those subscribers, Event Hub performs quite a few additional services that in some ways make it resemble a service bus or message queue more than a simple event broadcaster.</span></span>

#### <a name="partitions"></a><span data-ttu-id="ffdee-113">Particiones</span><span class="sxs-lookup"><span data-stu-id="ffdee-113">Partitions</span></span> ####
<span data-ttu-id="ffdee-114">A medida que Event Hubs recibe las comunicaciones, las divide en particiones.</span><span class="sxs-lookup"><span data-stu-id="ffdee-114">As Event Hub receives communications it divides them into partitions.</span></span> <span data-ttu-id="ffdee-115">Las particiones son los búferes en los que se guardan las comunicaciones.</span><span class="sxs-lookup"><span data-stu-id="ffdee-115">Partitions are buffers into which the communications are saved.</span></span> <span data-ttu-id="ffdee-116">Debido a los búferes de eventos, los eventos no son completamente efímeros y un evento no se pierde simplemente porque un suscriptor está ocupado o incluso sin conexión.</span><span class="sxs-lookup"><span data-stu-id="ffdee-116">Because of the event buffers, events are not completely ephemeral and an event isn't missed just because a subscriber is busy or even offline.</span></span> <span data-ttu-id="ffdee-117">El suscriptor siempre puede usar el búfer "para ponerse al día".</span><span class="sxs-lookup"><span data-stu-id="ffdee-117">The subscriber can always use the buffer to "catch up".</span></span> <span data-ttu-id="ffdee-118">De forma predeterminada, los eventos permanecen en el búfer durante 24 horas y después expiran automáticamente.</span><span class="sxs-lookup"><span data-stu-id="ffdee-118">By default events stay in the buffer for 24 hours then automatically expire.</span></span>

<span data-ttu-id="ffdee-119">Los búferes se denominan particiones porque los datos se dividen entre ellos.</span><span class="sxs-lookup"><span data-stu-id="ffdee-119">The buffers are called partitions because the data is divided amongst them.</span></span> <span data-ttu-id="ffdee-120">Cada centro de eventos tiene al menos dos particiones y cada partición tiene un conjunto independiente de suscriptores.</span><span class="sxs-lookup"><span data-stu-id="ffdee-120">Every Event Hub has at least two partitions, and each partition has a separate set of subscribers.</span></span>

#### <a name="capture"></a><span data-ttu-id="ffdee-121">Capture</span><span class="sxs-lookup"><span data-stu-id="ffdee-121">Capture</span></span> ####
<span data-ttu-id="ffdee-122">Event Hubs puede enviar todos los eventos inmediatamente a Azure Data Lake o Blob Storage para una persistencia permanente económica.</span><span class="sxs-lookup"><span data-stu-id="ffdee-122">Event Hub can send all your events immediately to Azure Data Lake or Blob Storage for inexpensive permanent persistence.</span></span>

#### <a name="authentication"></a><span data-ttu-id="ffdee-123">Autenticación</span><span class="sxs-lookup"><span data-stu-id="ffdee-123">Authentication</span></span> ####
<span data-ttu-id="ffdee-124">Todos los publicadores se autentican y emiten un token.</span><span class="sxs-lookup"><span data-stu-id="ffdee-124">All publishers are authenticated and issued a token.</span></span> <span data-ttu-id="ffdee-125">Esto significa que Evento Hubs puede aceptar eventos de dispositivos externos y aplicaciones móviles sin preocuparse de que datos fraudulentos procedentes de usuarios bromistas podrían arruinar nuestro análisis.</span><span class="sxs-lookup"><span data-stu-id="ffdee-125">This means Event Hub can accept events from external devices and mobile apps without worrying that fraudulent data from pranksters could ruin our analysis.</span></span> 

## <a name="using-azure-event-hub"></a><span data-ttu-id="ffdee-126">Uso de Azure Event Hubs</span><span class="sxs-lookup"><span data-stu-id="ffdee-126">Using Azure Event Hub</span></span>

<span data-ttu-id="ffdee-127">Event Hubs es compatible con la canalización de transmisiones de eventos a otros servicios de Azure.</span><span class="sxs-lookup"><span data-stu-id="ffdee-127">Event Hubs has support for pipelining event streams to other Azure services.</span></span> <span data-ttu-id="ffdee-128">Por ejemplo, si se usa con Stream Analytics, permite un análisis complejo de datos casi en tiempo real con la capacidad de poner varios eventos en correlación y buscar patrones.</span><span class="sxs-lookup"><span data-stu-id="ffdee-128">Using it with Stream Analytics for instance allows complex analysis of data in near real time with the ability to correlate multiple events and look for patterns.</span></span> <span data-ttu-id="ffdee-129">En este caso, Stream Analytics se consideraría un suscriptor.</span><span class="sxs-lookup"><span data-stu-id="ffdee-129">In this case, Stream Analytics would be considered a subscriber.</span></span>

<span data-ttu-id="ffdee-130">Para nuestros motores de aviones, configuraremos nuestra arquitectura para que Event Hubs autentique las comunicaciones de nuestros motores.</span><span class="sxs-lookup"><span data-stu-id="ffdee-130">For our aircraft engines, we'll set up our architecture so that Event Hubs will authenticate the communications from our engines.</span></span> <span data-ttu-id="ffdee-131">A continuación, haremos que use capturas para guardar todos los datos en Azure Data Lake. Más adelante podemos usar todos esos datos para volver a entrenar y mejorar nuestros modelos de aprendizaje automático.</span><span class="sxs-lookup"><span data-stu-id="ffdee-131">We will then have it use Capture to save all the data to Azure Data Lake, later we can use all that data to retrain and improve our machine learning models.</span></span> <span data-ttu-id="ffdee-132">Por último, los suscriptores de Azure Stream Analytics recogerán nuestras transmisiones de eventos.</span><span class="sxs-lookup"><span data-stu-id="ffdee-132">Finally, our event streams will be picked up by Azure Stream Analytics subscribers.</span></span> <span data-ttu-id="ffdee-133">Stream Analytics usará nuestro modelo de aprendizaje automático para buscar patrones en los datos de sensor que podrían indicar problemas.</span><span class="sxs-lookup"><span data-stu-id="ffdee-133">Stream Analytics will use our machine learning model to look for patterns in the sensor data that might indicate problems.</span></span>

<span data-ttu-id="ffdee-134">Dado que tenemos varias particiones y cada motor envía todos sus datos a una sola partición, cada instancia de nuestro suscriptor de Stream Analytics solo ocuparse de un subconjunto de todos nuestros datos en lugar de filtrarlos y correlacionarlos.</span><span class="sxs-lookup"><span data-stu-id="ffdee-134">Because we have several partitions, and each engine sends all its data to only one partition each instance of our Stream Analytics subscriber only need deal with a subset of our overall data instead of filtering and correlating over all of it.</span></span>

## <a name="choose-event-grid-or-event-hub"></a><span data-ttu-id="ffdee-135">Elección de Event Grid o Event Hubs</span><span class="sxs-lookup"><span data-stu-id="ffdee-135">Choose Event Grid or Event Hub</span></span>

<span data-ttu-id="ffdee-136">Ambos admiten la semántica *Al menos una vez*.</span><span class="sxs-lookup"><span data-stu-id="ffdee-136">Both support *At Least Once* semantics.</span></span>

<span data-ttu-id="ffdee-137">Si necesita una infraestructura simple de publicación y suscripción de eventos con editores de confianza (por ejemplo, su propio servidor web), debe elegir Azure Event Grid.</span><span class="sxs-lookup"><span data-stu-id="ffdee-137">If you need a simple event publish-subscribe infrastructure with trusted publishers (for instance your own web server), you should choose Azure Event Grid.</span></span>

### <a name="consider-event-hub-if"></a><span data-ttu-id="ffdee-138">Considere Event Hubs si</span><span class="sxs-lookup"><span data-stu-id="ffdee-138">Consider Event Hub if</span></span>
* <span data-ttu-id="ffdee-139">Necesita admitir la autenticación de un gran número de publicadores</span><span class="sxs-lookup"><span data-stu-id="ffdee-139">You need to support authenticating a large number of publishers</span></span>
* <span data-ttu-id="ffdee-140">Necesita guardar una transmisión de eventos a Azure Data Lake o Blob Storage</span><span class="sxs-lookup"><span data-stu-id="ffdee-140">You need to save a stream of events to Azure Data Lake or Blob Storage</span></span>
* <span data-ttu-id="ffdee-141">Necesita la agregación o análisis en la transmisión de eventos</span><span class="sxs-lookup"><span data-stu-id="ffdee-141">You need aggregation or analytics on your event stream</span></span>
* <span data-ttu-id="ffdee-142">Necesita mensajería de confianza o resistencia</span><span class="sxs-lookup"><span data-stu-id="ffdee-142">You need reliable messaging or resiliency</span></span> 