<span data-ttu-id="59efe-101">Supongamos que va a planear la arquitectura de una aplicación distribuida para compartir música.</span><span class="sxs-lookup"><span data-stu-id="59efe-101">Suppose you are planning the architecture of a distributed music-sharing application.</span></span> <span data-ttu-id="59efe-102">Desea asegurarse de que la aplicación es tan confiable y escalable como sea posible y piensa utilizar tecnologías de Azure para crear una infraestructura de comunicación sólida.</span><span class="sxs-lookup"><span data-stu-id="59efe-102">You want to ensure that the application is as reliable and scalable as possible and you intend to use Azure technologies to build a robust communication infrastructure.</span></span>

<span data-ttu-id="59efe-103">Para poder elegir la tecnología de Azure adecuada, debe conocer todas las comunicaciones individuales que los componentes de la aplicación intercambian.</span><span class="sxs-lookup"><span data-stu-id="59efe-103">Before you can choose the right Azure technology, you must understand each individual communication that the components of the application exchange.</span></span> <span data-ttu-id="59efe-104">Puede elegir una tecnología de Azure diferente para cada comunicación.</span><span class="sxs-lookup"><span data-stu-id="59efe-104">For each communication you can choose a different Azure technology.</span></span>

<span data-ttu-id="59efe-105">Lo primero que hay que saber sobre una comunicación es si envía mensajes o eventos.</span><span class="sxs-lookup"><span data-stu-id="59efe-105">The first thing to understand about a communication is whether it sends messages or events.</span></span> <span data-ttu-id="59efe-106">Algunas tecnologías de Azure están destinadas a eventos y otras a mensajes, por lo que se trata de una elección fundamental.</span><span class="sxs-lookup"><span data-stu-id="59efe-106">Some Azure technologies target events and other target messages so this is a fundamental choice.</span></span>

## <a name="what-is-a-message"></a><span data-ttu-id="59efe-107">¿Qué es un mensaje?</span><span class="sxs-lookup"><span data-stu-id="59efe-107">What is a message?</span></span>

<span data-ttu-id="59efe-108">En la terminología de las aplicaciones distribuidas, los **mensajes** tienen las siguientes características:</span><span class="sxs-lookup"><span data-stu-id="59efe-108">In the terminology of distributed applications, **messages** have the following characteristics:</span></span>

- <span data-ttu-id="59efe-109">Un mensaje contiene datos sin procesar producidos por un componente, que será consumido por otro componente.</span><span class="sxs-lookup"><span data-stu-id="59efe-109">A message contains raw data, produced by one component, that will be consumed by another component.</span></span>
- <span data-ttu-id="59efe-110">Un mensaje contiene los datos, no solo una referencia a esos datos.</span><span class="sxs-lookup"><span data-stu-id="59efe-110">A message contains the data itself, not just a reference to that data.</span></span>
- <span data-ttu-id="59efe-111">El componente de envío espera a que el componente de destino procese el contenido del mensaje de una forma determinada.</span><span class="sxs-lookup"><span data-stu-id="59efe-111">The sending component expects the message content to be processed in a certain way by the destination component.</span></span> <span data-ttu-id="59efe-112">La integridad del sistema global puede depender de que el remitente y receptor realicen un trabajo específico.</span><span class="sxs-lookup"><span data-stu-id="59efe-112">The integrity of the overall system may depend on both sender and receiver doing a specific job.</span></span>

<span data-ttu-id="59efe-113">Por ejemplo, supongamos que un usuario carga una canción nueva con la aplicación móvil para compartir música.</span><span class="sxs-lookup"><span data-stu-id="59efe-113">For example, suppose a user uploads a new song by using the mobile music-sharing app.</span></span> <span data-ttu-id="59efe-114">La aplicación móvil debe enviar dicha canción a la API web que se ejecuta en Azure.</span><span class="sxs-lookup"><span data-stu-id="59efe-114">The mobile app must send that song to the web API that runs in Azure.</span></span> <span data-ttu-id="59efe-115">Se debe enviar el archivo multimedia de la canción, no solo una alerta que indique que se ha agregado una canción nueva.</span><span class="sxs-lookup"><span data-stu-id="59efe-115">The song media file itself must be sent, not just an alert that indicates that a new song has been added.</span></span> <span data-ttu-id="59efe-116">La aplicación móvil espera que la API web almacene la canción nueva en la base de datos y que la ponga a disposición de otros usuarios.</span><span class="sxs-lookup"><span data-stu-id="59efe-116">The mobile app expects that the web API will store the new song in the database and make it available to other users.</span></span> <span data-ttu-id="59efe-117">Este es un ejemplo de un mensaje.</span><span class="sxs-lookup"><span data-stu-id="59efe-117">This is an example of a message.</span></span>

## <a name="what-is-an-event"></a><span data-ttu-id="59efe-118">¿Qué es un evento?</span><span class="sxs-lookup"><span data-stu-id="59efe-118">What is an event?</span></span>

<span data-ttu-id="59efe-119">Los **eventos** pesan algo menos que los mensajes y son los que se usan con más frecuencia para las comunicaciones de difusión.</span><span class="sxs-lookup"><span data-stu-id="59efe-119">**Events** are lighter-weight than messages and are most often used for broadcast communications.</span></span> <span data-ttu-id="59efe-120">Los componentes que envían el evento se llaman **publicadores** y los destinatarios se conocen como **suscriptores**.</span><span class="sxs-lookup"><span data-stu-id="59efe-120">The components sending the event are known as **publishers** and receivers are known as **subscribers**.</span></span>

<span data-ttu-id="59efe-121">Con los eventos, los componentes destinatarios, por lo general, decidirán qué comunicaciones les interesan y se "suscribirán" a ellas.</span><span class="sxs-lookup"><span data-stu-id="59efe-121">With events, receiving components will generally decide in which communications they are interested and "subscribe" to those.</span></span> <span data-ttu-id="59efe-122">La suscripción la suele administrar un intermediario, como Azure Event Grid o Azure Event Hubs.</span><span class="sxs-lookup"><span data-stu-id="59efe-122">The subscription is usually managed by an intermediary like Azure Event Grid or Azure Event Hub.</span></span> <span data-ttu-id="59efe-123">Cuando los publicadores envían un evento, el intermediario enrutará ese evento a los suscriptores interesados.</span><span class="sxs-lookup"><span data-stu-id="59efe-123">When publishers send an event, the intermediary will route that event to interested subscribers.</span></span> <span data-ttu-id="59efe-124">Se conoce como una "arquitectura publicación-suscripción", que no es la única manera de tratar los eventos, pero sí la más común.</span><span class="sxs-lookup"><span data-stu-id="59efe-124">This is known as a "publish-subscribe architecture", it is not the only way to deal with events, but it is the most common.</span></span>

<span data-ttu-id="59efe-125">Los eventos tienen las siguientes características:</span><span class="sxs-lookup"><span data-stu-id="59efe-125">Events have the following characteristics:</span></span>

- <span data-ttu-id="59efe-126">Un evento es una notificación ligera que indica que algo ha sucedido.</span><span class="sxs-lookup"><span data-stu-id="59efe-126">An event is a lightweight notification that indicates that something happened.</span></span>
- <span data-ttu-id="59efe-127">El evento puede enviarse a varios destinatarios o a ninguno.</span><span class="sxs-lookup"><span data-stu-id="59efe-127">The event may be sent to multiple receivers or to none at all.</span></span>
- <span data-ttu-id="59efe-128">Los eventos suelen estar diseñados para la "distribución ramificada de salida" o para disponer de un número elevado de suscriptores para cada publicador.</span><span class="sxs-lookup"><span data-stu-id="59efe-128">Events are often intended to "fan-out" or have a large number of subscribers for each publisher.</span></span>
- <span data-ttu-id="59efe-129">El publicador del evento no tiene ninguna expectativa sobre la acción que realiza un componente receptor.</span><span class="sxs-lookup"><span data-stu-id="59efe-129">The publisher of the event has no expectation about the action a receiving component takes.</span></span>
- <span data-ttu-id="59efe-130">Algunos eventos son unidades discretas y no están relacionados con otros eventos.</span><span class="sxs-lookup"><span data-stu-id="59efe-130">Some events are discrete units and unrelated to other events.</span></span> 
- <span data-ttu-id="59efe-131">Algunos eventos forman parte de una serie ordenada y relacionada.</span><span class="sxs-lookup"><span data-stu-id="59efe-131">Some events are part of a related and ordered series.</span></span>  

<span data-ttu-id="59efe-132">Por ejemplo, supongamos que se ha completado la carga del archivo de música y que se ha agregado la nueva canción a la base de datos.</span><span class="sxs-lookup"><span data-stu-id="59efe-132">For example, suppose the music file upload has been completed and the new song has been added to the database.</span></span> <span data-ttu-id="59efe-133">Para informar a los usuarios del nuevo archivo, la API web debe informar a los usuarios de la aplicación móvil y front-end del nuevo archivo.</span><span class="sxs-lookup"><span data-stu-id="59efe-133">In order to inform users of the new file, the web API must inform the web front-end and mobile app users of the new file.</span></span> <span data-ttu-id="59efe-134">Los usuarios pueden optar por escuchar la canción nueva, por lo que la notificación inicial no incluye el archivo de música, sino que solo notifica a los usuarios que la canción está disponible.</span><span class="sxs-lookup"><span data-stu-id="59efe-134">The users can choose whether to listen to the new song, so the initial notification does not include the music file but only notifies users that the song exists.</span></span> <span data-ttu-id="59efe-135">El remitente no tiene ninguna expectativa específica de que los destinatarios del evento harán algo en particular como respuesta a la recepción de este evento.</span><span class="sxs-lookup"><span data-stu-id="59efe-135">The sender does not have a specific expectation that the event receivers will do anything particular in response the receiving this event.</span></span>

<span data-ttu-id="59efe-136">Este es un ejemplo de un evento discreto.</span><span class="sxs-lookup"><span data-stu-id="59efe-136">This is an example of a discrete event.</span></span>

## <a name="how-to-choose-messages-or-events"></a><span data-ttu-id="59efe-137">Elección de los mensajes o eventos</span><span class="sxs-lookup"><span data-stu-id="59efe-137">How to choose messages or events</span></span>

<span data-ttu-id="59efe-138">Es probable que una única aplicación use eventos para algunos propósitos y mensajes para otros.</span><span class="sxs-lookup"><span data-stu-id="59efe-138">A single application is likely to use events for some purposes and messages for others.</span></span> <span data-ttu-id="59efe-139">Antes de elegir, debe analizar la arquitectura de la aplicación y todos sus casos de uso para identificar todas las distintas finalidades que sus componentes tienen para comunicarse entre sí.</span><span class="sxs-lookup"><span data-stu-id="59efe-139">Before you choose, you must analyze your application architecture and all its use cases to identify all the different purposes its components have to communicate with each other.</span></span> 

<span data-ttu-id="59efe-140">Es más probable que los eventos se usen para difusiones y que suelan ser efímeros, lo que significa que puede que un destinatario no tenga la posibilidad de administrar una comunicación si no hay ningún suscriptor actualmente.</span><span class="sxs-lookup"><span data-stu-id="59efe-140">Events are more likely to be used for broadcasts and are often ephemeral, meaning a communication might not be handled by any receiver if none are currently subscribing.</span></span> <span data-ttu-id="59efe-141">Es más probable que los mensajes se usen si la aplicación distribuida requiere una garantía de que se procese la comunicación.</span><span class="sxs-lookup"><span data-stu-id="59efe-141">Messages are more likely to be used where the distributed application requires a guarantee that the communication will be processed.</span></span>

<span data-ttu-id="59efe-142">Para cada comunicación, plantéese la pregunta: ¿el componente de envío espera que el componente de destino procese la comunicación de una forma determinada?</span><span class="sxs-lookup"><span data-stu-id="59efe-142">For each communication consider the question: Does the sending component expect the communication to be processed in a particular way by the destination component?</span></span>

<span data-ttu-id="59efe-143">Si la respuesta es afirmativa, opte por usar un mensaje.</span><span class="sxs-lookup"><span data-stu-id="59efe-143">If the answer is yes, choose to use a message.</span></span> <span data-ttu-id="59efe-144">Si la respuesta es no, es posible que pueda utilizar los eventos.</span><span class="sxs-lookup"><span data-stu-id="59efe-144">If the answer is no, you may be able to use events.</span></span>

## <a name="summary"></a><span data-ttu-id="59efe-145">Resumen</span><span class="sxs-lookup"><span data-stu-id="59efe-145">Summary</span></span>

<span data-ttu-id="59efe-146">Los componentes de una aplicación distribuida se comunican entre sí para muchos propósitos diferentes.</span><span class="sxs-lookup"><span data-stu-id="59efe-146">The components of a distributed application communicate with each other for many different purposes.</span></span> <span data-ttu-id="59efe-147">Para cada uno de estos propósitos, debe elegir si desea utilizar eventos o mensajes para que pueda elegir una tecnología de Azure que está diseñada para ese propósito.</span><span class="sxs-lookup"><span data-stu-id="59efe-147">For each of these purposes, you must choose whether to use events or messages so that you can choose an Azure technology that is designed for that purpose.</span></span> 

<span data-ttu-id="59efe-148">Después de entender por qué los componentes se comunican y saber si usan eventos o mensajes, puede elegir entre las colas de Azure Storage, Event Hubs, Event Grid o Service Bus para intercambiar la información.</span><span class="sxs-lookup"><span data-stu-id="59efe-148">Having understood why your components communicate and whether they use events or messages, you can proceed to choose from Azure Storage queues, Event Hubs, Event Grids, or Service Bus to exchange the information.</span></span>